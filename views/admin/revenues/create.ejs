<%- include('../partials/header.ejs') %>

<body>
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>

    <!-- Up menu  -->
    <%- include('../partials/navbar.ejs') %>

    <!-- Side menu  -->
    <%- include('../partials/menu.ejs') %>


    <div class="page-wrapper">
        <!-- ============================================================== -->
        <!-- Bread crumb and right sidebar toggle -->
        <!-- ============================================================== -->
        <div class="page-breadcrumb">
            <div class="row align-items-center">
                <div class="col-md-6 col-8 align-self-center">
                    <h3 class="page-title mb-0 p-0">Nuevo Ingreso</h3>
                    <div class="d-flex align-items-center">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item">
                                    <a href="/admin">Home</a>
                                </li>
                                <li class="breadcrumb-item">
                                    <a href="/ingresos">Ingresos</a>
                                </li>
                                
                                <li
                                    class="breadcrumb-item active"
                                    aria-current="page"
                                >
                                    Nuevo Ingreso
                                </li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

        
        <div class="container-fluid">
            <!-- ============================================================== -->
            <!-- Start Page Content -->
            <!-- ============================================================== -->
            <div class="row">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex">
                                <h4 class="card-title">Realizar una compra</h4>
                            
                            </div>
                            <form method="POST" action="/ingresos">
                                <div class="row">
                                    <div class="col">
                                        <div class="form-group">   
                                            <label for="name">Proveedor</label>
                                            <select class="form-control" name="supplier">
                                                <% proveedores.map((proveedor) => {  %>
                                                <option value="<%= proveedor._id %>"><%= proveedor.name %></option>
                                                <% }) %>
                                            </select> 
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="form-group">   
                                            <label for="name">Tipo de Comprobante</label>
                                            <select class="form-control" name="comprobanteType">
                                                <option value="Efectivo">Efectivo</option>
                                                <option value="Transferencia">Transferencia</option>
                                                <option value="Credito">Credito</option>
                                            </select> 
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col">
                                        <div class="form-group">   
                                            <label for="name">Serie Comprobante</label>
                                            <input required class="form-control" name="comprobanteSerie" type="number" placeholder="Introduce la serie del comprobante">
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="form-group">   
                                            <label for="name">Nro. Comprobante</label>
                                            <input required class="form-control" name="comprobanteNro" type="number" placeholder="Introduce el número de comprobante">
                                        </div>
                                    </div>
                                </div>

                                <div class="card shadow-sm p-3 mb-5 bg-white rounded">
                                    <div class="card-header bg-info rounded text-white">
                                      Agregar Artículos
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col">
                                                <div class="form-group">   
                                                    <label for="name">Artículo</label>
                                                    <select class="form-control" id="article">
                                                        <% articulos.map((articulo) => {  %>
                                                            <option value="<%= articulo.name %>"><%= articulo.name %></option>
                                                            <% }) %>
                                                    </select> 
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">   
                                                    <label for="name">Cantidad</label>
                                                    <input class="form-control" id="quantity" type="number" placeholder="Introduce la cantidad de artículos que desea">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col">
                                                <div class="form-group">   
                                                    <label for="name">Precio Compra</label>
                                                    <input class="form-control" id="price-buy" type="number" placeholder="Introduce el precio de compra del artículo">
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">   
                                                    <label for="name">Precio Venta</label>
                                                    <input class="form-control" id="price-sale"  type="number" placeholder="Introduce el precio de venta del artículo">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group d-flex justify-content-center">
                                            <button type="button" class="btn btn-info" id="add-article">Agregar artículo</button>
                                        </div>

                                        <div id="alert-error"></div>

                                

                                        <table class="table text-center">
                                            <caption>Lista de artículos</caption>
                                            <thead>
                                              <tr>
                                               
                                                <th scope="col">Artículo</th>
                                                <th scope="col">Cantidad</th>
                                                <th scope="col">Precio Compra</th>
                                                <th scope="col">Precio Venta</th>
                                                <th scope="col">SubTotal</th>
                                                <th scope="col">Opciones</th>
                                              </tr>
                                            </thead>
                                            <tbody id="table-article-info">
                                              
                                            </tbody>
                                          </table>
                                        <h3 style="float: right">Total: <span id="total"></span> bs. </h3>
                                    </div>
                                  </div>

                                
                                    <div class="form-group d-flex justify-content-center">
                                        <button type="submit" class="btn btn-primary mb-2">Realizar Compra</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
 
            <%- include('../partials/footer.ejs') %>
            <%- include('./scriptAddArticle.ejs') %>
            
